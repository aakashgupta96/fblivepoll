<html>
  
  <head>
    <title>Frame Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>
  
  <body>
    <% if post.user.member? %>
    <div class="random" style="position: absolute; z-index: 100000; opacity: 0.9;">
      <b style="position: absolute; z-index: 100000;">
        <img style="position: absolute; z-index: 100000;" src="../../../small_logo.png" width="80" height="40"">
      </b>
    </div>
    <% end %>
    <div class="wrapper">
      
      <div class="boxes" style="left: 0px; top: 0px; -webkit-box-shadow:inset 0px -1px 0px 0px #fff; -moz-box-shadow:inset 0px -1px 0px 0px #fff; box-shadow:inset 0px -1px 0px 0px #fff; background-image: url(<%=ENV['prefix']%><%=images[0].file.url%>); background-size: 275px 225px;">
      </div>
      <div class="boxes" style="left: 0px; top:225px ;  -webkit-box-shadow:inset 0px 1px 0px 0px #fff; -moz-box-shadow:inset 0px 1px 0px 0px #fff; box-shadow:inset 0px 1px 0px 0px #fff; background-image: url(<%=ENV['prefix']%><%=images[2].file.url%>); background-size: 275px 225px;">
      </div>
      <div class="boxes" style="left: 525px; top: 0px;  -webkit-box-shadow:inset 0px -1px 0px 0px #fff; -moz-box-shadow:inset 0px -1px 0px 0px #fff; box-shadow:inset 0px -1px 0px 0px #fff; background-image: url(<%=ENV['prefix']%><%=images[1].file.url%>); background-size: 275px 225px;">
      </div>
      <div class="boxes" style="left: 525px; top: 225px;  -webkit-box-shadow:inset 0px 1px 0px 0px #fff; -moz-box-shadow:inset 0px 1px 0px 0px #fff; box-shadow:inset 0px 1px 0px 0px #fff; background-image: url(<%=ENV['prefix']%><%=images[3].file.url%>); background-size: 275px 225px;">
      </div>

      <svg viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <pattern id="img" patternUnits="userSpaceOnUse" width="200" height="100">
            <image xlink:href="http://i.imgur.com/t6Ez8g3.jpg" x="0" width="180" height="100"></image>
          </pattern>
        </defs>
        <polygon id="hex" points="50 15 95 25 95 75 50 85 5 75 5 25" fill="url(#img)"></polygon>
      </svg>
      
      <div class="flc" style="top: 10px; left: 240px;">
        <img src="../../../reactions/<%=images[0].reaction%>.gif" width="60px" style="margin-top: 20px; margin-left: 50px;">
        <div style="width: 120px; height: 35px; background-color: white; border-radius: 10px; margin-top: 10px; margin-left: 20px; display: flex; justify-content: center; align-items: center; font-family:Roboto, sans-serif; font-size: 30px;">
          <center id="counter1">
            0
          </center>
        </div>
        <h3 style="color: white; font-family: Josefin Sans, sans-serif; margin-top: 10px; font-size: 14px;">
          <center>
            <%=images[0].name%>
          </center>
        </h3>
      </div>
      
      <div class="flc" style="top: 10px; left: 400px;">
        <img src="../../../reactions/<%=images[1].reaction%>.gif" width="60px" style="margin-top: 20px; margin-left: 40px;">
        <div style="width: 120px; height: 35px; background-color: white; border-radius: 10px; margin-top: 10px; margin-left: 12px; display: flex; justify-content: center; align-items: center; font-family:Roboto, sans-serif; font-size: 30px;">
          <center id="counter2">
            0
          </center>
        </div>
        <h3 style="color: white; font-family: Josefin Sans, sans-serif; margin-top: 10px; font-size: 14px;">
          <center>
            <%=images[1].name%>
          </center>
        </h3>
      </div>
         
      <div class="flc" style="top: 270px; left: 240px;">
        <h3 style="color: white; font-family: Josefin Sans, sans-serif; margin-top: 0px; font-size: 14px;">
          <center>
            <%=images[2].name%>
          </center>
        </h3>
        <div style="width: 120px; height: 35px; background-color: white; border-radius: 10px; margin-top: 10px; margin-left: 20px; display: flex; justify-content: center; align-items: center; font-family:Roboto, sans-serif; font-size: 30px;">
          <center id="counter3">
            0
          </center>
        </div>
        <img src="../../../reactions/<%=images[2].reaction%>.gif" width="60px" style="margin-top: 10px; margin-left: 50px;">
      </div>
         
      <div class="flc" style="top: 270px; left: 400px;">
        <h3 style="color: white; font-family: Josefin Sans, sans-serif;margin-top: 0px; font-size: 14px;">
          <center>
            <%=images[3].name%>
          </center>
        </h3>
        <div style="width: 120px; height: 35px; background-color: white; border-radius: 10px; margin-top:0px; margin-left: 12px; display: flex; justify-content: center; align-items: center; font-family: Roboto, sans-serif; font-size: 30px;">
          <center id="counter4">
            0
          </center>
        </div>
        <img src="../../../reactions/<%=images[3].reaction%>.gif" width="60px" style="margin-top: 10px; margin-left: 40px;">
      </div>
         
      <div class="line" style="top: 100px; left: 320px;"></div>
      <div class="line" style="top: 340px; left: 320px;"></div>
      <div class="title">      
        <center>
          <%= post.title %>
        </center>
      </div>
      </div>
      
      <script type="text/javascript">
        var postID = "<%= post.video_id %>";
        var access_token = "<%=post.page_access_token%>";
        var refreshTime = 3;
        var defaultCount = 0;
        var reactions = ['LIKE', 'LOVE', 'WOW', 'HAHA', 'SAD', 'ANGRY'].map(function (e) {
            var code = 'reactions_' + e.toLowerCase();
            return 'reactions.type(' + e + ').limit(0).summary(total_count).as(' + code + ')'
        }).join(',');
        
        function refreshCounts() {
            var url = 'https://graph.facebook.com/v2.8/?ids=' + postID + '&fields=' + reactions + '&access_token=' + access_token;
        	$.getJSON(url, function(res){
        		var v1 = res[postID].reactions_<%=images[0].reaction%>.summary.total_count;
        		var v2 = res[postID].reactions_<%=images[1].reaction%>.summary.total_count;
            var v3 = res[postID].reactions_<%=images[2].reaction%>.summary.total_count;
            var v4 = res[postID].reactions_<%=images[3].reaction%>.summary.total_count;
            $('#counter1').text(v1);
            $('#counter2').text(v2);
            $('#counter3').text(v3);
            $('#counter4').text(v4);
        	});
        }
        $(document).ready(function(){
            setInterval(refreshCounts, refreshTime * 1000);
            refreshCounts();
        });
      </script>

    <style>
      *
      {
        padding: 0;
        margin: 0;
        cursor: none;
      }
    
      @font-face {
        font-family: 'Josefin Sans';
        font-style: normal;
        font-weight: 600;
        src: local('Josefin Sans SemiBold'), local('JosefinSans-SemiBold'), url(https://fonts.gstatic.com/s/josefinsans/v9/C6HYlRF50SGJq1XyXj04z9sVlKlcXvEcgUssOU60Pj4.woff2) format('woff2');
        unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
      }
      
      @font-face {
        font-family: 'Josefin Sans';
        font-style: normal;
        font-weight: 600;
        src: local('Josefin Sans SemiBold'), local('JosefinSans-SemiBold'), url(https://fonts.gstatic.com/s/josefinsans/v9/C6HYlRF50SGJq1XyXj04z_Bf3Xtc57ojmY2ox2Xv8Go.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
      }

       .wrapper {
       position: absolute;
       top: 0px;
       left: 0px;
       width: 800px;
       height: 450px;
       overflow: hidden;
       background-color: red;
       }
       .boxes {
       position: absolute;
       width: 275px;
       height: 225px;
       background-color: black;
       }
       svg {
       width: 64%;
       transform: rotate(90deg);
       position: absolute;
       top: -31px;
       left: 140px;
       }
       #hex {
       stroke-width: 0.5;
       stroke: red;
       }
       .flc {
       position: absolute;
       width: 150px;
       height: 170px;
       }
       .line {
       width: 150px;
       height: 2px;
       transform: rotate(90deg);
       background-color: white;
       position: absolute;
       }
       .title {
       height: 60px;
       width: 330px;
       color: white;
       position: relative;
       top: 192px;
       left: 230px;
       font-family: 'Josefin Sans', sans-serif;
       font-size: 19px;
       display: flex;
       justify-content: center;
       align-items: center;
       }
      .random b {
        position: absolute;
        display: block;
        z-index: 100000;
        -webkit-animation: moveX 14s linear 0s infinite alternate, moveY 13.4s linear 0s infinite alternate;
        -moz-animation: moveX 14s linear 0s infinite alternate, moveY 13.4s linear 0s infinite alternate;
        -o-animation: moveX 14s linear 0s infinite alternate, moveY 13.4s linear 0s infinite alternate;
        animation: moveX 14s linear 0s infinite alternate, moveY 13.4s linear 0s infinite alternate;
      }

      @-webkit-keyframes moveX {
        from { left: 0; } to { left: 705px; }
      }
      @-moz-keyframes moveX {
        from { left: 0; } to { left: 705px; }
      }
      @-o-keyframes moveX {
        from { left: 0; } to { left: 705px; }
      }
      @keyframes moveX {
        from { left: 0; } to { left: 705px; }
      }
      @-webkit-keyframes moveY {
        from { top: 0; } to { top: 395px; }
      }
      @-moz-keyframes moveY {
        from { top: 0; } to { top: 395px; }
      }
      @-o-keyframes moveY {
        from { top: 0; } to { top: 395px; }
      }
      @keyframes moveY {
        from { top: 0; } to { top: 395px; }
      }
    </style>  
  </body>

</html>